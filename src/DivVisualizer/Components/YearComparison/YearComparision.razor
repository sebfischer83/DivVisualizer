@using TagEChartsBlazor.Components
@inherits Fluxor.Blazor.Web.Components.FluxorComponent

@if (InitSuccess)
{
    <AntDesign.Row>
        <AntDesign.Col Span="12">
            <ECharts Style="width: 100%; height: 400px;" @ref="OverviewChart" theme="infographic"
            OnClick="@(new(async (param, chart) =>
                    {
                       
                    }))">
                <Dataset>

                </Dataset>
                <TagEChartsBlazor.Components.Title text="Veränderung letzten 8 Jahre"></TagEChartsBlazor.Components.Title>
                <TagEChartsBlazor.Components.Tooltip trigger="item" triggerOn="mousemove" formatter=" {c}€ "></TagEChartsBlazor.Components.Tooltip>
                <XAxis type="category" z="10">
                    @foreach (var item in Years)
                    {
                        var tmp = item;
                        <Data value="tmp">
                           
                        </Data>
                        @* crazy stuff because razor yields always the last one and js functions are always async and can't be used here *@
                        <AxisLabel inside="false" rotate="-40" formatter="@($"(value) => {{ return window.xaxisdesc[value]; }}")">
                            <TextStyle fontSize="10" fontWeight="normal">
                             
                            </TextStyle>
                        </AxisLabel>
                     }
                </XAxis>
                <YAxis>
                    <AxisLabel formatter="(value, index) => {return value + '€';}"></AxisLabel>
                </YAxis>
                <Toolbox>
                    <Feature>
                        <SaveAsImage type="png" pixelRatio="2"></SaveAsImage>
                        <DataView></DataView>
                        <MagicType type="@(new string[] {"line", "bar"})"></MagicType>
                    </Feature>
                </Toolbox>
                <Series name="Dividenden" type="bar" data="@SumValuesPerYear" hoverAnimation="true">
                </Series>
            </ECharts>
        </AntDesign.Col>
        <AntDesign.Col Span="12">@LastSelectedYear</AntDesign.Col>
    </AntDesign.Row>
    <AntDesign.Row>
         <AntDesign.Col Span="24">
             <ECharts Style="width: 100%; height: 400px;" @ref="OverviewChart" theme="infographic"
            OnClick="@(new(async (param, chart) =>
                    {
                       
                    }))">
                <Dataset>

                </Dataset>
                <TagEChartsBlazor.Components.Title text="Dividendenübersicht"></TagEChartsBlazor.Components.Title>
                <TagEChartsBlazor.Components.Tooltip trigger="item" triggerOn="mousemove" formatter=" {c}€ "></TagEChartsBlazor.Components.Tooltip>
                <XAxis type="category" z="10">
                    @foreach (var item in Years)
                    {
                        var tmp = item;
                        <Data value="tmp">
                           
                        </Data>
                        <AxisLabel inside="false" rotate="-20" formatter="@($"(value) => {{ return value; }}")">
                            <TextStyle fontSize="10" fontWeight="normal">
                             
                            </TextStyle>
                        </AxisLabel>
                     }
                </XAxis>
                <YAxis>
                    <AxisLabel formatter="(value, index) => {return value + '€';}"></AxisLabel>
                </YAxis>
                <Toolbox>
                    <Feature>
                        <SaveAsImage type="png" pixelRatio="2"></SaveAsImage>
                        <DataView></DataView>
                        <MagicType type="@(new string[] {"line", "bar"})"></MagicType>
                    </Feature>
                </Toolbox>
                <Series name="Dividenden" type="bar" data="@SumValuesPerYear" hoverAnimation="true">
                </Series>
            </ECharts>
         </AntDesign.Col>
    </AntDesign.Row>

}